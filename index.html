<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="mobile-web-app-capable" content="yes">
	<title>Magic Smile</title>
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
	<script src="phonegap.js"></script>
      <script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
	<script src="jquery.mobile-1.4.5.min.js"></script>
	<script>


function initonesignal()
{ // window.plugins.OneSignal.setLogLevel({logLevel: 4, visualLevel: 4});
   window.plugins.OneSignal
    .startInit("47d512d3-9681-4f48-848f-78d7bc9a2cf5")
    .endInit();
   window.plugins.OneSignal.getPermissionSubscriptionState(function(status) {
      alert('status: '+JSON.stringify(status));
      alert(status.subscriptionStatus.pushToken);
      window.localStorage.setItem('pushtoken',status.subscriptionStatus.pushToken);
   });
}

function init()
{ // window.plugins.OneSignal.setLogLevel({logLevel: 4, visualLevel: 4});
   window.plugins.OneSignal
    .startInit("47d512d3-9681-4f48-848f-78d7bc9a2cf5")
    .endInit();
}

function getstatus()
{
   window.plugins.OneSignal.getPermissionSubscriptionState(function(status) {
      alert('status: '+JSON.stringify(status));
      alert(status.subscriptionStatus.userId);
      window.localStorage.setItem('pushtoken',status.subscriptionStatus.userId);
   });
}

function showtoken()
{ var p = window.localStorage.getItem('pushtoken');
  if (!p) p="";
  alert(p);
}

function resettoken()
{ window.localStorage.removeItem('pushtoken');
}

function dummytoken()
{ window.localStorage.setItem('pushtoken','blahblah');
}

</script>
</head>
<body>

<div data-role="page" id="intropage" class="mypg">

 <div role="main" class="ui-content myback">


 
<input type="button" style="background-color:dodgerblue" value="GET STATUS" onclick="getstatus();">
<br><br>
<input type="button" style="background-color:dodgerblue" value="INITIALIZE" onclick="init();">
<br><br>
<input type="button" style="background-color:dodgerblue" value="SHOW TOKEN" onclick="showtoken();">
<br><br>

<input type="button" style="background-color:dodgerblue" value="RESET" onclick="resettoken();">
<br><br>
<input type="button" style="background-color:dodgerblue" value="DUMMY" onclick="dummytoken();">
<br><br>




</div>
</div>

</body>
</html>